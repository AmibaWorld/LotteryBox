<?php
//生成奖池
$arr_award = array(2,3,1,2,3,1,3,2,3,0,3,2,3,1,3,3,2,3,3,2,3,3,1,3,2,3,3,0,3,1,
		3,1,3,2,3,3,1,0,3,3,1,3,3,2,3,2,1,3,3,2,3,3,3,2,3,3,3,1,3,3,
		3,3,3,1,3,2,3,1,3,3,2,3,0,3,3,3,1,3,3,2,3,3,1,3,3,2,3,3,2,3,
		1,3,0,3,3,1,3,3,2,3,3,2,3,3,1,3,3,2,3,3,2,3,2,3,3,1,3,2,3,3,
		3,3,1,3,2,3,3,1,3,2,3,3,3,2,3,2,2,3,3,0,3,3,3,2,3,3,3,2,3,2,
		3,0,3,2,3,1,3,3,2,3,3,2,1,2,2,1,2,2,2,2,2,2,2,1,1,2,1,1,2,1,
		2,2,2,1,1,2,2,0,2,1,3,1,3,2,3,2,3,2,3,2,3,2,3,1,3,3,2,3,3,3,
		3,2,3,1,3,2,3,3,3,1,3,3,3,3,3,3,3,3,2,3,3,2,3,3,3,3,3,2,3,3,
		3,3,3,3,2,3,2,3,3,3,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,
		3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
	);
	// 并发访问，php文件锁,加锁
	$fp = fopen('./award_pool.json', 'w+'); // php的文件锁和表没关系，随便一个文件即可
	if(flock($fp, LOCK_EX)){    //排他锁
		$json_award_pool = json_encode($arr_award);
		fwrite($fp , $json_award_pool);
		// php的文件锁，释放锁
		flock($fp, LOCK_UN);
	}else{
		echo "获取并发访问文件锁失败";
	}
	//关闭文件
	fclose($fp);